(function(t){function e(e){for(var i,s,r=e[0],c=e[1],l=e[2],f=0,d=[];f<r.length;f++)s=r[f],a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={popup:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([1,"chunk-vendors"]),n()})({"025e":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return c});n("a481"),n("c5f6"),n("ac6a"),n("28a5"),n("20d6");var i=n("f499"),a=n.n(i),o=(n("3fd3"),{get:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):""},set:function(t,e){localStorage.setItem(t,a()(e))},addItem:function(t,e){var n=this.get(t)||[];return n.unshift(e),this.set(t,n),n},deleteItemBy:function(t,e,n){var i=this.get(t);if(i&&i.length){var a=i.findIndex(function(t){return t[e]===n});a>-1&&i.splice(a,1),this.set(t,i)}return i}});function s(t){for(var e="",n=t.filter(function(t){return t.enable}),i=0;i<n.length;i++){var a=n[i];e+=0===i?"if":"else if",a.domain.indexOf("/")>0?e+='(shExpMatch(url, "http://'+a.domain+'") || shExpMatch(url, "https://'+a.domain+'"))':a.domain.indexOf("*")>-1?e+='(shExpMatch(host, "'+a.domain+'"))':e+='(host == "'+a.domain+'")',e+='{return "PROXY '+a.target+'; DIRECT";}\n'}e&&(e+='else { return "DIRECT"; }');var o='\n      function FindProxyForURL(url,host){\n        if(shExpMatch(url, "http:*") || shExpMatch(url, "https:*")){\n          '.concat(e,'\n        } else {\n          return "DIRECT";\n        }\n      }\n  ');return console.log("--------\x3e>>> getPacScript\n",o),o}function r(t,e){if(void 0===t){if(t=o.get("enable"),""===t)t=!0;else if(!1===t)return}else o.set("enable",t);var n={mode:"system"};t&&(n={mode:"pac_script",pacScript:{data:s(e)}}),window.chrome.proxy.settings.set({scope:"regular",value:n})}function c(t){var e=t.split("\n"),n=/^\s*([^\s]+)\s*([^\s]+)?\s*([^\s]+)?\s*([^\s]+)?\s*([^\s]+)?\s*$/,i=[];return e.length&&e.forEach(function(t,e){if(t=t.trim(),t&&0!==t.indexOf("#")){var a=n.exec(t);if(a&&a[1]&&a[2]){var o=a[3],s=a[4],r=a[5];o&&!r&&(isNaN(Number(o))?isNaN(Number(s))&&(s=0,r=a[4]):(o="",s=a[3],r=a[4]));var c={id:(new Date).getTime()+"-"+e,domain:a[1],target:a[2],tags:o,order:Number(s)||0,note:r||"",create_at:(new Date).getTime()};c.tags=c.tags?c.tags.replace(/,\s/g,",").replace(/\s+/g,",").split(","):[],i.push(c)}}}),i}},"0471":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rule-list"},[t.list.length?[n("div",{staticClass:"tags"},[n("a",{class:{active:""===t.activeTag},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.filterListByTag("")}}},[t._v(t._s(t.$t("All"))+"("+t._s(t.list.length)+")")]),t._l(t.tags,function(e,i){return n("a",{class:{active:t.activeTag===i},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.filterListByTag(i)}}},[t._v(t._s(i)+"("+t._s(e)+")")])})],2),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{width:"30px"}},[t._v(t._s(t.$t("Enable")))]),n("th",[t._v(t._s(t.$t("Domain/URL")))]),n("th",[t._v("Target")]),n("th",[t._v(t._s(t.$t("Tags")))]),t.action?n("th",{staticClass:"align-r"},[t._v(t._s(t.$t("Order")))]):t._e(),n("th",[t._v(t._s(t.$t("Note")))]),t.action?n("th",{staticClass:"align-r"}):t._e()])]),n("tbody",t._l(t.showList,function(e){return n("tr",[n("td",[n("el-checkbox",{on:{change:function(n){return t.statusChanged(e)}},model:{value:e.enable,callback:function(n){t.$set(e,"enable",n)},expression:"it.enable"}})],1),n("td",{staticClass:"title"},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.statusChanged(e,!0)}}},[t._v(t._s(e.domain))])]),n("td",[t._v(t._s(e.target))]),n("td",[t._v(t._s(e.tags.join(", ")))]),t.action?n("td",{staticClass:"align-r"},[t._v(t._s(e.order))]):t._e(),n("td",[t._v(t._s(e.note))]),t.action?n("td",[n("div",{staticClass:"actions align-r"},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.deleteItem(e.id)}}},[t._v(t._s(t.$t("Delete")))]),n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.editItem(e.id)}}},[t._v(t._s(t.$t("Edit")))])])]):t._e()])}),0)]),t.action?n("div",{staticClass:"list-actions"},[n("el-button",{attrs:{size:"mini"},on:{click:t.exportList}},[t._v(t._s(t.$t("Export")))]),t.exporting?n("div",{staticClass:"export-text"},[n("p",[t._v(t._s(t.$t("Copy and save the rules below, then you can import by the Bulk-Add next time")))]),n("textarea",{attrs:{rows:"5",readonly:""},on:{focus:t.selectExportText}},[t._v(t._s(t.exportText))])]):t._e()],1):t._e()]:n("el-alert",{attrs:{closable:!1}},[t._t("empty-note",[n("p",[t._v(t._s(t.$t("Rules not found")))])])],2)],2)},a=[],o=n("5176"),s=n.n(o),r=(n("55dd"),n("a4bb")),c=n.n(r),l=(n("20d6"),n("7514"),n("ac6a"),n("025e")),u={props:{action:{type:Boolean,default:!0}},data:function(){return{activeTag:"",list:l["a"].get("rules")||[],exporting:!1}},computed:{showList:function(){var t=this;return this.activeTag?this.list.filter(function(e){return e.tags.indexOf(t.activeTag)>-1}):this.list},tags:function(){var t={};return this.list.forEach(function(e){e.tags.forEach(function(e){t[e]?t[e]+=1:t[e]=1})}),t},exportText:function(){var t=[];return this.list.forEach(function(e){t.push("".concat(e.domain," ").concat(e.target," ").concat(e.tags.join(",")," ").concat(e.order," ").concat(e.note))}),t.join("\n")}},watch:{list:function(){this.syncList()}},methods:{exportList:function(){this.exporting=!this.exporting},selectExportText:function(t){t.target.select()},syncList:function(){l["a"].set("rules",this.list),this.setProxy()},statusChanged:function(t,e){if(e&&(t.enable=!t.enable),t.enable){var n=this.list.find(function(e){return e.id!==t.id&&e.enable&&e.domain===t.domain});n&&(n.enable=!1)}this.syncList()},filterListByTag:function(t){if(this.activeTag===t){var e={},n=this.showList.findIndex(function(t){return!t.enable});this.showList.forEach(function(t){t.enable=n>-1,n>-1&&(e[t.domain]=t.id)}),c()(e).length&&this.list.forEach(function(t){e[t.domain]!==t.id&&(t.enable=!1)}),this.syncList()}else this.activeTag=t},sortList:function(){this.list=this.list.sort(function(t,e){return e.order-t.order})},deleteItem:function(t){var e=this;this.$confirm(this.$t("Are you sure you want to delete this rule?"),this.$t("Confirm")).then(function(){var n=e.list.findIndex(function(e){return t===e.id});n>-1&&e.list.splice(n,1)})},editItem:function(t){var e=this.list.findIndex(function(e){return t===e.id});e>-1&&this.$emit("edit",this.list[e])},addItem:function(t){this.list.unshift(s()(t,{id:(new Date).getTime()+"-0",enable:!1})),this.sortList()},addItems:function(t){this.list=this.list.concat(t),this.sortList()},setItem:function(t){var e=this.list.findIndex(function(e){return t.id===e.id});e>-1?(this.$set(this.list,e,t),this.sortList()):this.addItem(t)},getEnabledHosts:function(){return this.list.filter(function(t){return t.enable})},setProxy:function(t){Object(l["c"])(t,this.list)}}},f=u,d=(n("cd96"),n("2877")),h=Object(d["a"])(f,i,a,!1,null,null,null);e["a"]=h.exports},"0a3d":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup-page",attrs:{id:"app"}},[n("h2",[n("span",[t._v("老干爹HOSTS切换器")]),n("el-switch",{attrs:{"active-text":t.$t("Enable")},model:{value:t.enable,callback:function(e){t.enable=e},expression:"enable"}})],1),n("div",{staticClass:"mt-10"},t._l(t.ENVS,function(e){return n("div",{staticClass:"mt-4"},[n("el-radio",{attrs:{label:e.name},model:{value:t.selectedEnv,callback:function(e){t.selectedEnv=e},expression:"selectedEnv"}},[t._v(t._s(e.name))])],1)}),0)])},o=[],s=(n("ac6a"),n("7f7f"),n("025e")),r="https://git.tezign.com/lihuawei/host/raw/master",c=[{name:"测试环境A-2+6",rawInfo:"".concat(r,"/测试环境A-2+6"),hosts:""},{name:"测试环境B-3+1",rawInfo:"".concat(r,"/测试环境B-3+1"),hosts:""},{name:"测试环境C-7+4",rawInfo:"".concat(r,"/测试环境C-7+4"),hosts:""},{name:"测试环境D-8+5",rawInfo:"".concat(r,"/测试环境D-8+5"),hosts:""},{name:"预发环境",rawInfo:"".concat(r,"/预发环境"),hosts:""}],l=c.reduce(function(t,e,n){return t[e.name]=e,t},{}),u={X_TOP_USER_ID:"X-Top-User-Id",X_TOP_TOKEN:"X-Top-Token",C_TOP_XTOKEN:"xtoptoken",C_TOP_XUID:"xtopuid",COOKIE_DOMAIN:"top.tezign.com",API_ORIGIN:"https://service.tezign.com"},f="favorite_bucket_";u.FAVORITE_BUCKET=f;var d="favorite_list_";u.FAVORITE_LIST=d;var h=n("f499"),g=n.n(h),m=n("2ef0"),p=n.n(m),v={HTTP_CODE:{BAD_REQUEST:{code:400,name:"非法参数"},NOT_FOUND:{code:404,name:"该服务接口不存在"},SUCCESS:{code:200,name:"请求成功"},EXCEPTION:{code:500,name:"服务器异常"}},RESULT_CODE:{BAD_REQUEST:{code:"-2",name:"您请求的参数不正确"},NOT_FOUND:{code:"-1",name:"该服务接口不存在"},SUCCESS:{code:"0",name:"请求成功"},EXCEPTION:{code:"1",name:"服务接口发生异常"},FORBIDDEN_OPERATION:{code:"2",name:"没有权限访问该接口"},NOT_BE_DESIGNER:{code:"3",name:"只有设计师才能访问该接口"},NOT_BE_CUSTOMER:{code:"4",name:"只有客户才能访问该接口"},ILLEGAL_USER:{code:"5",name:"这是一个非法的用户"},ILLEGAL_PROJECT:{code:"6",name:"这是一个非法的项目"}},COMMON_CODE:{DATA_ERROR:{code:"DATA-ERROR",name:"数据解析异常"},FETCH_ERROR:{code:"FETCH-ERROR",name:"请求异常"}}},_=v;n("d2ae");function b(t,e){return fetch(t,e).then(function(t){if(t.status!==_.HTTP_CODE.SUCCESS.code)throw b.trigger(t.status),t;return t.text().then(function(t){return t},function(t){throw b.trigger(_.COMMON_CODE.DATA_ERROR.code),t})},function(t){throw b.trigger(_.COMMON_CODE.FETCH_ERROR.code),t})}b.trigger=function(t){console.error("请求异常",t)},b.defaults={headers:{"Content-Type":"application/json;charset=UTF-8"}},b.get=function(t,e){return e=e||{},e.method="GET",e=p.a.merge({},b.defaults,e),b(t,e)},b.post=function(t,e,n){return n=n||{},n.body=g()(e),n.method="POST",n=p.a.merge({},b.defaults,n),b(t,n)};var E=b,O=n("0471"),x="\n# ------- 大平台 env 2 ----------------------\n39.105.117.47 service.tezign.com\n39.105.117.47 tezign.com\n39.105.117.47 www.tezign.com\n39.105.117.47 m.tezign.com\n39.105.117.47 pro.tezign.com\n39.105.117.47 top.tezign.com\n39.105.117.47 cal.tezign.com\n39.105.117.47 event.tezign.com\n39.105.117.47 job.tezign.com\n39.105.117.47 cal.tezign.com\n39.105.117.47 demo.tezign.com\n39.105.117.47 mind.tezign.com\n\n# ------- 数据智能 env 6 ----------------------\n47.94.216.194 itg-static.tezign.com\n47.94.216.194 vms-service.tezign.com\n\n47.94.216.194 unilever.tezign.com\n47.94.216.194 unilever-top.tezign.com\n47.94.216.194 alipurchase.tezign.com\n47.94.216.194 alipurchase-top.tezign.com\n47.94.216.194 express.tezign.com\n47.94.216.194 express-top.tezign.com\n47.94.216.194 alibaba.tezign.com\n47.94.216.194 vms-t2.tezign.com\n47.94.216.194 vms-t2-top.tezign.com\n47.94.216.194 ef-test.tezign.com\n47.94.216.194 ef-test-top.tezign.com\n47.94.216.194 nio.tezign.com\n47.94.216.194 nio-top.tezign.com\n\n47.94.216.194 dam\n47.94.216.194 dsp\n47.94.216.194 general\n47.94.216.194 h5ubt-logserver\n47.94.216.194 message\n47.94.216.194 mini-admin\n47.94.216.194 message\n47.94.216.194 mini-app\n47.94.216.194 ms-alipurchase\n47.94.216.194 pdf2img\n47.94.216.194 portfolio\n47.94.216.194 product\n47.94.216.194 rule-checker\n47.94.216.194 search\n47.94.216.194 smart\n47.94.216.194 tenant\n47.94.216.194 tenant-manager\n47.94.216.194 top2\n47.94.216.194 tracking\n47.94.216.194 user\n47.94.216.194 web-service\n\n# ------- 公共资源 ----------------------\n# ES\n123.57.137.216 tech-esv5-dev.tezign.com\n\n#数据中台\n123.57.23.218 data-analysis.tezign.com\n# 搜多多\n123.57.23.218 search.tezign.com\n# 服务注册中心\n172.17.58.212 eureka-server\n",T={name:"app",components:{RuleList:O["a"]},data:function(){var t=s["a"].get("enable"),e=s["a"].get("selectedEnv");return{ENVS:c,selectedEnv:e||c[0].name,enable:""===t||t}},refreshEnv:function(){var t=l[this.selectedEnv].rawInfo;E.get(t).then(function(t){console.log("------\x3e>>> hosts \n",t);var e=Object(s["b"])(x);e.forEach(function(t){t.enable=!0;var e=t.domain+":443";t.domain=t.target,t.target=e}),console.log("------\x3e>>> hosts \n",t),Object(s["c"])(!0,e)})},watch:{selectedEnv:function(){if(s["a"].set("selectedEnv",this.selectedEnv),this.enable){var t=l[this.selectedEnv].rawInfo;E.get(t).then(function(t){console.log("------\x3e>>> hosts \n",t);var e=Object(s["b"])(x);e.forEach(function(t){t.enable=!0;var e=t.domain;t.domain=t.target,t.target=e}),console.log("------\x3e>>> hostInfos \n",e),Object(s["c"])(!0,e)})}},enable:function(){if(this.enable){var t=l[this.selectedEnv].rawInfo;E.get(t).then(function(t){console.log("------\x3e>>> hosts \n",t);var e=Object(s["b"])(x);e.forEach(function(t){t.enable=!0;var e=t.domain+":443";t.domain=t.target,t.target=e}),console.log("------\x3e>>> hostInfos \n",e),Object(s["c"])(!0,e)})}else Object(s["c"])(!1,[])}},methods:{gotoSettingPage:function(){window.open("/setting.html")}}},C=T,w=(n("5df5"),n("c4b1"),n("2877")),I=Object(w["a"])(C,a,o,!1,null,null,null),y=I.exports,R=n("a925"),S=n("2ab5"),z=n("5c96"),D=n.n(z);n("0fae"),n("e008");i["default"].config.productionTip=!1,i["default"].use(R["a"]),i["default"].use(D.a,{size:"small",zIndex:3e3});var N=new R["a"]({locale:"zh-CN",messages:S["a"]});new i["default"]({i18n:N,render:function(t){return t(y)}}).$mount("#app")},1:function(t,e,n){t.exports=n("0a3d")},"2ab5":function(t,e,n){"use strict";e["a"]={"zh-CN":{Setting:"设置",Enable:"启用","Rules not found, ":"没有找到任何代理规则，","Rules not found":"还没有添加任何代理规则","Click to Add":"点击添加","Domain/URL":"域名/URL",Tags:"标签",Order:"排序",Note:"备注",All:"全部",Delete:"删除",Edit:"编辑",Confirm:"提示","Are you sure you want to delete this rule?":"确定要删除该配置项吗？","Add Rules":"添加规则",Add:"添加","Bulk Add":"批量添加","Tags For All Rules":"统一设置标签",Preview:"预览","Can not get any rules, please check your input rules format":"没有解析到任何代理规则，请注意检查格式","Sure to Add":"确定添加","Sure to Save":"确定保存",Cancel:"取消",Export:"导出","All Rules":"所有规则","Copy and save the rules below, then you can import by the Bulk-Add next time":"将下面内容复制保存起来，下次可通过左侧的批量添加导入。"}}},"5df5":function(t,e,n){"use strict";var i=n("e0f7"),a=n.n(i);a.a},a34b:function(t,e,n){},c4b1:function(t,e,n){"use strict";var i=n("dc38"),a=n.n(i);a.a},cd96:function(t,e,n){"use strict";var i=n("a34b"),a=n.n(i);a.a},dc38:function(t,e,n){},e008:function(t,e,n){},e0f7:function(t,e,n){}});